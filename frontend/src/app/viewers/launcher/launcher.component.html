<div class="flex h-screen font-sans antialiased text-gray-200 light:text-gray-900">
	<app-sidebar/>

	<main class="flex-grow flex flex-col bg-tertiary light:bg-tertiary-light">
		<app-top-bar/>

		<div class="flex-grow relative overflow-y-auto">
			@if (state.isRouterActive) {
				<router-outlet/>
			}

			@for (tab of state.openTabs().values(); track tab.tabId) {
				<div class="absolute inset-0" [class.hidden]="state.activeView() !== tab.tabId">
					@if (environment.useWebview) {
						@if (tab.isWhitelistedDomain) {
							<webview #webview class="w-full h-full border-0" [attr.data-tab-id]="tab.tabId" [attr.src]="tab.rawUrl" webpreferences="allowRunningInsecureContent" enableremotemodule="false" plugins allowpopups></webview>
						} @else {
							<webview #webview class="w-full h-full border-0" [attr.data-tab-id]="tab.tabId" [attr.src]="tab.rawUrl" enableremotemodule="false" allowpopups></webview>
						}
					} @else {
						<iframe class="w-full h-full border-0" [attr.src]="tab.safeUrl"></iframe>
					}
				</div>
			}
		</div>
	</main>
</div>

@if (settings.isSettingsVisible()) {
	<app-setting/>
}
