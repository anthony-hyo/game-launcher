<div
	class="absolute inset-0 bg-cover bg-center transition-all duration-500 ease-in-out"
	[style.background-image]="'url(' + libraryGame.imageUrl + ')'"
></div>

<div
	class="light:via-from-white/70 absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent light:from-white"
></div>

<div class="relative z-10 h-full overflow-y-auto">
	<button
		class="absolute left-6 top-6 z-30 flex items-center space-x-2 rounded-lg bg-black/50 px-4 py-2 text-white transition-colors hover:bg-black/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-tertiary"
		routerLink="/library"
	>
		<span class="material-symbols-rounded">keyboard_arrow_left</span>
		<span>Library</span>
	</button>

	<div class="p-8 sm:p-12 md:p-16">
		<div class="flex min-h-[70vh] flex-col justify-end">
			<div class="max-w-2xl pb-12">
				<div class="mb-4 flex items-center gap-4">
					<span class="inline-block rounded-full bg-secondary px-4 py-1 text-sm font-bold text-tertiary">{{
						libraryGame.genre
					}}</span>

					@if (libraryGame.playCount && libraryGame.playCount > 0) {
						<div
							class="flex items-center space-x-2 rounded-full bg-black/30 px-3 py-1 text-sm font-bold text-gray-300 backdrop-blur-sm light:text-gray-200"
						>
							<span class="material-symbols-rounded text-sm">play_circle</span>
							<span
								>Played {{ libraryGame.playCount }}
								{{ libraryGame.playCount === 1 ? 'time' : 'times' }}</span
							>
						</div>
					}
				</div>

				<h1
					class="text-shadow-lg mb-4 text-5xl font-black uppercase tracking-tighter text-white sm:text-6xl md:text-7xl"
					style="text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5)"
				>
					{{ libraryGame.title }}
				</h1>

				<p class="mb-8 max-w-prose text-lg text-gray-300 drop-shadow-md light:text-gray-100">
					{{ libraryGame.description }}
				</p>

				<button
					(click)="stateService.playGame(libraryGame.url, libraryGame)"
					class="inline-flex w-full transform items-center justify-center rounded-lg bg-primary px-12 py-4 text-lg font-bold text-white shadow-2xl shadow-black/40 transition-all duration-300 hover:-translate-y-1 hover:shadow-black/50 hover:brightness-90 focus:outline-none focus:ring-4 focus:ring-primary/50 sm:w-auto"
				>
					<span class="material-symbols-rounded mr-2">play_arrow</span>
					Play Now
				</button>
			</div>
		</div>

		@if (libraryGame.news && libraryGame.news.length > 0) {
			<div class="mt-8 pb-16">
				<h2
					class="mb-6 border-l-4 border-primary pl-4 text-3xl font-bold uppercase tracking-wider text-white light:text-black"
				>
					Latest News
				</h2>
				<div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
					@for (article of libraryGame.news; track article.title) {
						<div
							class="flex cursor-pointer overflow-hidden rounded-lg bg-black/60 ring-1 ring-white/5 backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-black/20 hover:ring-white/10 light:bg-white/60 light:ring-black/5 light:hover:ring-black/10"
						>
							<img [src]="article.imageUrl" [alt]="article.title" class="h-auto w-1/3 object-cover" />

							<div class="w-2/3 p-4">
								<p class="mb-1 text-xs uppercase text-gray-400 light:text-gray-500">
									{{ article.date }}
								</p>
								<h3 class="mb-2 font-semibold text-white light:text-gray-900">{{ article.title }}</h3>
								<p class="line-clamp-2 text-sm text-gray-400 light:text-gray-600">
									{{ article.summary }}
								</p>
							</div>
						</div>
					}
				</div>
			</div>
		}
	</div>
</div>

<app-footer />
