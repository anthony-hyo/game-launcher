<div class="flex-shrink-0 bg-gray-200 dark:bg-neutral-950 backdrop-blur-md border-b border-black/10 dark:border-white/5 z-20 flex items-center justify-between pr-3 h-[50px]">
	<div class="flex items-end -mb-px pl-4 overflow-x-auto no-scrollbar h-full self-end">
		<button (click)="launcherSelect.emit()"
				class="flex items-center px-4 py-3 text-sm font-medium border-b-2 transition-colors duration-200 focus:outline-none h-full whitespace-nowrap"
				[class.text-black]="isLauncherViewActive()"
				[class.dark:text-white]="isLauncherViewActive()"
				[class.border-primary]="isLauncherViewActive()"
				[class.text-gray-600]="!isLauncherViewActive()"
				[class.dark:text-gray-400]="!isLauncherViewActive()"
				[class.border-transparent]="!isLauncherViewActive()"
				[class.hover:text-black]="!isLauncherViewActive()"
				[class.dark:hover:text-white]="!isLauncherViewActive()">
			<svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
				<path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
			</svg>
			Library
		</button>
		@for (tab of stateService.openTabs(); track tab.id) {
			<button (click)="viewSelect.emit(tab.id)"
					class="group flex items-center px-4 py-3 text-sm font-medium border-b-2 transition-colors duration-200 focus:outline-none h-full whitespace-nowrap max-w-[200px]"
					[class.text-black]="activeView() === tab.id"
					[class.dark:text-white]="activeView() === tab.id"
					[class.border-primary]="activeView() === tab.id"
					[class.text-gray-600]="activeView() !== tab.id"
					[class.dark:text-gray-400]="activeView() !== tab.id"
					[class.border-transparent]="activeView() !== tab.id"
					[class.hover:text-black]="activeView() !== tab.id"
					[class.dark:hover:text-white]="activeView() !== tab.id">
				<span class="truncate">{{ tab.game.title }}</span>
				<button (click)="closeTab($event, tab.id)" class="ml-2 w-5 h-5 rounded-full flex items-center justify-center text-gray-500 hover:bg-gray-400 dark:hover:bg-gray-700 hover:text-white transition-colors duration-200 flex-shrink-0">
					&times;
				</button>
			</button>
		}
	</div>

	<!-- Window Controls -->
	<div class="flex items-center gap-1.5 ml-4">
		<button (click)="minimizeApp()" class="w-8 h-8 flex items-center justify-center rounded-lg text-gray-500 hover:text-black dark:text-gray-400 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 transition-colors focus:outline-none" aria-label="Minimize">
			<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
				<path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
			</svg>
		</button>
		<button (click)="toggleMaximizeApp()" class="w-8 h-8 flex items-center justify-center rounded-lg text-gray-500 hover:text-black dark:text-gray-400 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 transition-colors focus:outline-none" aria-label="Maximize">
			@if(isFullscreen()) {
				<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
					<path stroke-linecap="round" stroke-linejoin="round" d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5M15 15l5.25 5.25" />
				</svg>
			} @else {
				<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
					<path stroke-linecap="round" stroke-linejoin="round" d="M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z" />
				</svg>
			}
		</button>
		<button (click)="closeApp()" class="w-8 h-8 flex items-center justify-center rounded-lg text-gray-500 hover:text-white dark:text-gray-400 dark:hover:text-white hover:bg-red-500 transition-colors focus:outline-none" aria-label="Close">
			<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
				<path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
			</svg>
		</button>
	</div>
</div>
